<!DOCTYPE html>
<html>
	<head>
		<title>news</title>
		<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
		
		<style type="text/css">
		* {
			padding:0px;
			margin:0px;
		}
		.roll-news {
			width:480px;
			height:360px;
			border:solid 1px #c1c1c1;
		}
		.roll-news-index-hover {
			background-color:white;
		}
		.roll-news-image img {			
			width:480px;
			height:360px;
		}
		.roll-news-index {
			position:relative;
			top:-50px;
			margin-right:5px;
			float:right;
		}
		.roll-news-index {
		}
		.roll-news-index li {
			list-style:none;
			float:left;
			font-size:12px;
			font-weight:600;
			width:18px;
			height:16px;
			line-height:16px;
			cursor:pointer;
			margin:0 3px;
			background-image:url(opacity_50.png);
			text-align:center;
		}
		.roll-news-title {
			position:relative;
			top:-25px;
			padding-left:10px;
			height:27px;
			line-height:20px;
			background:url(opacity_50.png);
		}
		.roll-news-title a {
			font-size:15px;
			text-decoration:none;
			color:#222222;
		}
		.roll-news-title a:hover {
			color:blue;
		}
		</style>
		<script type="text/javascript">
		
			$(document).ready(function(){		   
				var index=0;
				var slideFlag = true;
				var length=$(".roll-news-image img").length;

				function showImg(i){
					$(".roll-news-image img")
					.eq(i).stop(true,true).fadeIn(1800)
					.siblings("img").hide();

					$(".roll-news-index li").removeClass("roll-news-index-hover");
					$(".roll-news-index li").eq(i).addClass("roll-news-index-hover");

					$(".roll-news-title a")
					.eq(i).stop(true,true).fadeIn(1800)
					.siblings("a").hide();
				}
				showImg(index);
				
				$(".roll-news-index li").click(function(){
					index = $(".roll-news-index li").index(this);
					showImg(index);
					slideFlag = false;
				});	
				
				function autoSlide() {
					setInterval(function() {
						if(slideFlag) {
							showImg((index+1) % length);
							index = (index+1)%length;
						}
						slideFlag = true;
					}, 3000);
				}
				
				autoSlide();
				
			});
		</script>
		<script>
		void function() {
		var url = '/data.json';

		function processData(data) {
			$('img').each(function(index,m){
			var c = $(m);
			c[0].setAttribute("src",data.news[index].pic_href);			
			})
			
			$('li').each(function(index,m){
			var c = $(m);
			c[0].setAttribute("href",data.news[index].news_href);	
			
			})
			$('a').each(function(index,m){
			var c = $(m);
			c[0].innerHTML=data.news[index].new_title;
			})
		  }

		  function handler() {
			if (this.readyState == this.DONE) {
			  if (this.status == 200) {
				try {
				  processData(JSON.parse(this.responseText));
				} catch(ex) {
				  console.log(ex.message);
				}
			  }
			}
		  }

		  function ajax() {
			var client = new XMLHttpRequest();
			client.onreadystatechange = handler;
			client.open('GET', url,true);
			client.send();
		  }
		   ajax();
		}();
		</script>
	</head>
	<body>
		<div class="roll-news">
			<div class="roll-news-image">
				<img src="http://img1.gtimg.com/news/pics/hv1/39/16/1647/107100294.jpeg" style="display:none">
				<img src="http://img2.duitang.com/uploads/item/201111/15/20111115104036_AcnUz.thumb.600_0.jpg" style="display:none">
				<img src="http://img4.duitang.com/uploads/item/201202/29/20120229160925_jJ2Ei.thumb.600_0.jpg" style="display:none">
			</div>
			<div class="roll-news-index">
				<ul>
					<li class="roll-news-index-hover">1</li>
					<li>2</li>
					<li>3</li>
				</ul>
			</div>
			<div class="roll-news-title">
				<a href="http://news.qq.com/a/20140708/043484.htm">河北张家口现治霾神器：用“雾炮”治雾霾</a>
				<a href=""" style="display:none">图片2：点击后跳转</a>
				<a href="" style="display:none">图片3：点击后跳转</a>
			</div>
		</div>
	</body>
</html>